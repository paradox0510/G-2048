(this.webpackJsonpmine=this.webpackJsonpmine||[]).push([[0],{12:function(e,t,s){"use strict";s.r(t);var r=s(7),i=s(8),a=s(11),o=s(10),n=s(2),h=s.n(n),c=s(9),l=s.n(c),d=(s(17),s(1)),u=s(0);function v(e,t){return Math.floor(Math.random()*(t-e)+e)}var f=function(e){Object(a.a)(s,e);var t=Object(o.a)(s);function s(e){var i;return Object(r.a)(this,s),(i=t.call(this,e)).xDown=null,i.yDown=null,i.firstTouch=null,i.state={board:[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],gmaeOver:!1,score:0,Highscore:0},i}return Object(i.a)(s,[{key:"initBoard",value:function(){var e=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],t=v(0,4),s=v(0,4),r=v(0,4),i=v(0,4);e[t][r]=2*v(1,3),e[s][i]=2*v(1,3),this.setState({board:e,gmaeOver:!1,score:0})}},{key:"getBlankCoordinates",value:function(e){for(var t=[],s=0;s<e.length;s++)for(var r=0;r<e[s].length;r++)0===e[s][r]&&t.push([s,r]);return t}},{key:"placeRand",value:function(e){var t=this.getBlankCoordinates(e),s=t[Math.floor(Math.random()*t.length)],r=2*v(1,3);return e[s[0]][s[1]]=r,e}},{key:"isChanged",value:function(e,t){return JSON.stringify(t)!==JSON.stringify(e)}},{key:"up",value:function(e){for(var t=d(e),s=d(t),r=0;r<4;r++)for(var i=0;i<4;i++)if(0===t[i][r]){for(var a=i+1;a<4&&0===t[a][r];)a++;if(4===a)break;var o=t[a][r];t[a][r]=t[i][r],t[i][r]=o}for(var n=0,h=0;h<4;h++)for(var c=0;c<3;c++)if(t[c][h]===t[c+1][h]){t[c][h]*=2,n+=t[c][h];for(var l=c+1;l<3;)t[l][h]=t[l+1][h],l++;t[l][h]=0}return this.isChanged(s,t)&&(t=this.placeRand(t)),{b:t,score:n}}},{key:"down",value:function(e){for(var t=d(e),s=d(t),r=0;r<4;r++)for(var i=3;i>0;i--)if(0===t[i][r]){for(var a=i-1;a>=0&&0===t[a][r];)a--;if(-1===a)break;var o=t[a][r];t[a][r]=t[i][r],t[i][r]=o}for(var n=0,h=0;h<4;h++)for(var c=3;c>0;c--)if(t[c][h]===t[c-1][h]){t[c][h]*=2,n+=t[c][h];for(var l=c-1;l>0;)t[l][h]=t[l-1][h],l--;t[l][h]=0}return this.isChanged(s,t)&&(t=this.placeRand(t)),{b:t,score:n}}},{key:"right",value:function(e){for(var t=d(e),s=d(t),r=0;r<4;r++)for(var i=3;i>0;i--)if(0===t[r][i]){for(var a=i-1;a>=0&&0===t[r][a];)a--;if(-1===a)break;var o=t[r][a];t[r][a]=t[r][i],t[r][i]=o}for(var n=0,h=0;h<4;h++)for(var c=3;c>0;c--)if(t[h][c]===t[h][c-1]){t[h][c]*=2,n+=t[h][c];for(var l=c-1;l>0;)t[h][l]=t[h][l-1],l--;t[h][l]=0}return this.isChanged(s,t)&&(t=this.placeRand(t)),{b:t,score:n}}},{key:"left",value:function(e){for(var t=d(e),s=d(t),r=0;r<4;r++)for(var i=0;i<4;i++)if(0===t[r][i]){for(var a=i+1;a<4&&0===t[r][a];)a++;if(4===a)break;var o=t[r][a];t[r][a]=t[r][i],t[r][i]=o}for(var n=0,h=0;h<4;h++)for(var c=0;c<3;c++)if(t[h][c]===t[h][c+1]){t[h][c]*=2,n+=t[h][c];for(var l=c+1;l<3;)t[h][l]=t[h][l+1],l++;t[h][l]=0}return this.isChanged(s,t)&&(t=this.placeRand(t)),{b:t,score:n}}},{key:"isGameOver",value:function(e){return![this.isChanged(e,this.up(e).b),this.isChanged(e,this.down(e).b),this.isChanged(e,this.right(e).b),this.isChanged(e,this.left(e).b)].includes(!0)}},{key:"componentDidMount",value:function(){this.initBoard();var e=window.localStorage.getItem("score"),t=e?JSON.parse(e):0;this.setState({Highscore:t}),document.querySelector("body").addEventListener("keydown",this.handleKeyDown.bind(this)),document.addEventListener("touchstart",this.handleTouchStart.bind(this),!1),document.addEventListener("touchmove",this.handleTouchMove.bind(this),!1)}},{key:"handleTouchStart",value:function(e){this.firstTouch=(e.touches||e.originalEvent.touches)[0],this.xDown=this.firstTouch.clientX,this.yDown=this.firstTouch.clientY}},{key:"handleTouchMove",value:function(e){if(this.xDown&&this.yDown){var t=e.touches[0].clientX,s=e.touches[0].clientY,r=this.xDown-t,i=this.yDown-s;Math.abs(r)>Math.abs(i)?r>0?this.makeMove("left"):this.makeMove("right"):i>0?this.makeMove("up"):this.makeMove("down"),this.xDown=null,this.yDown=null}}},{key:"handleKeyDown",value:function(e){38===e.keyCode?this.makeMove("up"):39===e.keyCode?this.makeMove("right"):40===e.keyCode?this.makeMove("down"):37===e.keyCode?this.makeMove("left"):78===e.keyCode&&this.initBoard()}},{key:"makeMove",value:function(e){if(!this.state.gmaeOver)if("up"===e){var t=this.up(this.state.board),s=t.b,r=t.score;this.isGameOver(s)?this.setState({board:s,gmaeOver:!0,score:r+this.state.score,Highscore:Math.max(r+this.state.score,this.state.Highscore)}):this.setState({board:s,gmaeOver:!1,score:r+this.state.score,Highscore:Math.max(r+this.state.score,this.state.Highscore)})}else if("down"===e){var i=this.down(this.state.board),a=i.b,o=i.score;this.isGameOver(a)?this.setState({board:a,gmaeOver:!0,score:o+this.state.score,Highscore:Math.max(o+this.state.score,this.state.Highscore)}):this.setState({board:a,gmaeOver:!1,score:o+this.state.score,Highscore:Math.max(o+this.state.score,this.state.Highscore)})}else if("right"===e){var n=this.right(this.state.board),h=n.b,c=n.score;this.isGameOver(h)?this.setState({board:h,gmaeOver:!0,score:c+this.state.score,Highscore:Math.max(c+this.state.score,this.state.Highscore)}):this.setState({board:h,gmaeOver:!1,score:c+this.state.score,Highscore:Math.max(c+this.state.score,this.state.Highscore)})}else if("left"===e){var l=this.left(this.state.board),d=l.b,u=l.score;this.isGameOver(d)?this.setState({board:d,gmaeOver:!0,score:u+this.state.score,Highscore:Math.max(u+this.state.score,this.state.Highscore)}):this.setState({board:d,gmaeOver:!1,score:u+this.state.score,Highscore:Math.max(u+this.state.score,this.state.Highscore)})}window.localStorage.setItem("score",this.state.Highscore)}},{key:"componentWillUnmount",value:function(){window.localStorage.setItem("score",this.state.Highscore),document.querySelector("body").removeEventListener("keydown",this.handleKeyDown.bind(this)),document.removeEventListener("touchstart",this.handleTouchStart.bind(this)),document.removeEventListener("touchmove",this.handleTouchMove.bind(this))}},{key:"render",value:function(){var e=this;return Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:"2048!"}),Object(u.jsxs)("h3",{children:[Object(u.jsxs)("span",{className:"score",children:["Score: ",this.state.score]}),Object(u.jsxs)("span",{className:"highscore",children:[" High score: ",this.state.Highscore]})]}),Object(u.jsx)("table",{children:this.state.board.map((function(e,t){return Object(u.jsx)(m,{row:e},t)}))}),Object(u.jsx)("div",{className:"button",onClick:function(){e.initBoard()},children:"New Game"}),Object(u.jsxs)("div",{className:"buttons",children:[Object(u.jsx)("div",{className:"button",onClick:function(){e.makeMove("up")},children:"Up"}),Object(u.jsx)("div",{className:"button",onClick:function(){e.makeMove("down")},children:"down"}),Object(u.jsx)("div",{className:"button",onClick:function(){e.makeMove("right")},children:"right"}),Object(u.jsx)("div",{className:"button",onClick:function(){e.makeMove("left")},children:"Left"})]}),Object(u.jsx)("h2",{children:this.state.gmaeOver?"Game Over!":"Game on!!"})]})}}]),s}(h.a.Component),m=function(e){var t=e.row;return Object(u.jsx)("tr",{children:t.map((function(e,t){return Object(u.jsx)(b,{cellValue:e},t)}))})},b=function(e){var t=e.cellValue,s="cell",r=0===t?"":t;return r&&(s+=" color-".concat(r)),Object(u.jsx)("td",{children:Object(u.jsx)("div",{className:s,children:Object(u.jsx)("div",{className:"number",children:r})})})};l.a.render(Object(u.jsx)(f,{}),document.getElementById("root"))},17:function(e,t,s){}},[[12,1,2]]]);
//# sourceMappingURL=main.3f3cc688.chunk.js.map